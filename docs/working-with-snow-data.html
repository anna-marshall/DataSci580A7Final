<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Working with snow data | Environmental Data Science Methods &amp; Analyses Compilation</title>
  <meta name="description" content="This is a book compiling class assignments for an environmental data science course. The output format for this is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Working with snow data | Environmental Data Science Methods &amp; Analyses Compilation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a book compiling class assignments for an environmental data science course. The output format for this is bookdown::gitbook." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Working with snow data | Environmental Data Science Methods &amp; Analyses Compilation" />
  
  <meta name="twitter:description" content="This is a book compiling class assignments for an environmental data science course. The output format for this is bookdown::gitbook." />
  

<meta name="author" content="Anna Marshall" />


<meta name="date" content="2022-03-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="working-with-fire-data.html"/>
<link rel="next" href="working-with-lagos-data---part-1.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to this book</a></li>
<li class="chapter" data-level="2" data-path="working-with-flow-data.html"><a href="working-with-flow-data.html"><i class="fa fa-check"></i><b>2</b> Working with flow data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="working-with-flow-data.html"><a href="working-with-flow-data.html#overview"><i class="fa fa-check"></i><b>2.1</b> Overview</a></li>
<li class="chapter" data-level="2.2" data-path="working-with-flow-data.html"><a href="working-with-flow-data.html#methods"><i class="fa fa-check"></i><b>2.2</b> Methods</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="working-with-flow-data.html"><a href="working-with-flow-data.html#static-data-plotter"><i class="fa fa-check"></i><b>2.2.1</b> Static Data Plotter</a></li>
<li class="chapter" data-level="2.2.2" data-path="working-with-flow-data.html"><a href="working-with-flow-data.html#interactive-data-plotter"><i class="fa fa-check"></i><b>2.2.2</b> Interactive Data Plotter</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="working-with-flow-data.html"><a href="working-with-flow-data.html#analysis-and-discussion"><i class="fa fa-check"></i><b>2.3</b> Analysis and Discussion</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="working-with-flow-data.html"><a href="working-with-flow-data.html#point-dygraph-of-discharge"><i class="fa fa-check"></i><b>2.3.1</b> Point DyGraph of Discharge</a></li>
<li class="chapter" data-level="2.3.2" data-path="working-with-flow-data.html"><a href="working-with-flow-data.html#more-about-the-poudre"><i class="fa fa-check"></i><b>2.3.2</b> More about the Poudre</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-fire-data.html"><a href="working-with-fire-data.html"><i class="fa fa-check"></i><b>3</b> Working with fire data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="working-with-fire-data.html"><a href="working-with-fire-data.html#overview-1"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="working-with-fire-data.html"><a href="working-with-fire-data.html#methods-1"><i class="fa fa-check"></i><b>3.2</b> Methods</a></li>
<li class="chapter" data-level="3.3" data-path="working-with-fire-data.html"><a href="working-with-fire-data.html#analysis-and-discussion-1"><i class="fa fa-check"></i><b>3.3</b> Analysis and Discussion</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="working-with-fire-data.html"><a href="working-with-fire-data.html#correlation-between-ndvi-and-ndmi"><i class="fa fa-check"></i><b>3.3.1</b> Correlation between NDVI and NDMI</a></li>
<li class="chapter" data-level="3.3.2" data-path="working-with-fire-data.html"><a href="working-with-fire-data.html#correlation-between-average-ndsi-january-april-and-ndvi-june-august"><i class="fa fa-check"></i><b>3.3.2</b> Correlation between average NDSI (January-April) and NDVI (June-August)</a></li>
<li class="chapter" data-level="3.3.3" data-path="working-with-fire-data.html"><a href="working-with-fire-data.html#comparing-snow-effect-between-burned-vs.-unburned-and-pre--vs.-post-burn."><i class="fa fa-check"></i><b>3.3.3</b> Comparing snow effect between burned vs. unburned and pre- vs. post-burn.</a></li>
<li class="chapter" data-level="3.3.4" data-path="working-with-fire-data.html"><a href="working-with-fire-data.html#what-month-is-the-greenest-month-on-average"><i class="fa fa-check"></i><b>3.3.4</b> What month is the greenest month on average?</a></li>
<li class="chapter" data-level="3.3.5" data-path="working-with-fire-data.html"><a href="working-with-fire-data.html#what-month-is-the-snowiest-on-average"><i class="fa fa-check"></i><b>3.3.5</b> What month is the snowiest on average?</a></li>
<li class="chapter" data-level="3.3.6" data-path="working-with-fire-data.html"><a href="working-with-fire-data.html#redo-all-problems-with-spread-and-gather-using-modern-tidyverse-syntax."><i class="fa fa-check"></i><b>3.3.6</b> Redo all problems with <code>spread</code> and <code>gather</code> using modern tidyverse syntax.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html"><i class="fa fa-check"></i><b>4</b> Working with snow data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#overview-2"><i class="fa fa-check"></i><b>4.1</b> Overview</a></li>
<li class="chapter" data-level="4.2" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#methods-2"><i class="fa fa-check"></i><b>4.2</b> Methods</a></li>
<li class="chapter" data-level="4.3" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#analysis-and-discussion-2"><i class="fa fa-check"></i><b>4.3</b> Analysis and Discussion</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#extract-the-meteorological-data-urls.-here-we-want-you-to-use-the-rvest-package-to-get-the-urls-for-the-sasp-forcing-and-sbsp_forcing-meteorological-datasets."><i class="fa fa-check"></i><b>4.3.1</b> Extract the meteorological data URLs. Here we want you to use the <code>rvest</code> package to get the URLs for the <code>SASP forcing</code> and <code>SBSP_forcing</code> meteorological datasets.</a></li>
<li class="chapter" data-level="4.3.2" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#download-the-meteorological-data.-use-the-download_file-and-str_split_fixed-commands-to-download-the-data-and-save-it-in-your-data-folder."><i class="fa fa-check"></i><b>4.3.2</b> Download the meteorological data. Use the <code>download_file</code> and <code>str_split_fixed</code> commands to download the data and save it in your data folder.</a></li>
<li class="chapter" data-level="4.3.3" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#writing-a-custom-function-to-read-in-the-data-and-append-a-site-column-to-the-data."><i class="fa fa-check"></i><b>4.3.3</b> Writing a custom function to read in the data and append a site column to the data.</a></li>
<li class="chapter" data-level="4.3.4" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#as-a-map-function-with-tibble-displayed"><i class="fa fa-check"></i><b>4.3.4</b> As a map function with tibble displayed</a></li>
<li class="chapter" data-level="4.3.5" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#make-a-line-plot-of-mean-temp-by-year-by-site"><i class="fa fa-check"></i><b>4.3.5</b> Make a line plot of mean temp by year by site</a></li>
<li class="chapter" data-level="4.3.6" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#write-a-function-that-makes-line-plots-of-monthly-average-temperature-at-each-site-for-a-given-year.-use-a-for-loop-to-make-these-plots-for-2005-to-2010."><i class="fa fa-check"></i><b>4.3.6</b> Write a function that makes line plots of monthly average temperature at each site for a given year. Use a for loop to make these plots for 2005 to 2010.</a></li>
<li class="chapter" data-level="4.3.7" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#plot-of-average-daily-precipitation-by-day-of-year-averaged-across-all-available-years."><i class="fa fa-check"></i><b>4.3.7</b> Plot of average daily precipitation by day of year (averaged across all available years).</a></li>
<li class="chapter" data-level="4.3.8" data-path="working-with-snow-data.html"><a href="working-with-snow-data.html#use-a-function-and-for-loop-to-create-yearly-plots-of-precipitation-by-day-of-year."><i class="fa fa-check"></i><b>4.3.8</b> Use a function and for loop to create yearly plots of precipitation by day of year.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-with-lagos-data---part-1.html"><a href="working-with-lagos-data---part-1.html"><i class="fa fa-check"></i><b>5</b> Working with LAGOS data - Part 1</a>
<ul>
<li class="chapter" data-level="5.1" data-path="working-with-lagos-data---part-1.html"><a href="working-with-lagos-data---part-1.html#overview-3"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="working-with-lagos-data---part-1.html"><a href="working-with-lagos-data---part-1.html#methods-3"><i class="fa fa-check"></i><b>5.2</b> Methods</a></li>
<li class="chapter" data-level="5.3" data-path="working-with-lagos-data---part-1.html"><a href="working-with-lagos-data---part-1.html#analysis-and-discussion-3"><i class="fa fa-check"></i><b>5.3</b> Analysis and Discussion</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="working-with-lagos-data---part-1.html"><a href="working-with-lagos-data---part-1.html#show-a-map-outline-of-iowa-and-illinois"><i class="fa fa-check"></i><b>5.3.1</b> Show a map outline of Iowa and Illinois</a></li>
<li class="chapter" data-level="5.3.2" data-path="working-with-lagos-data---part-1.html"><a href="working-with-lagos-data---part-1.html#subset-lagos-data-to-these-sites-how-many-sites-are-in-illinois-and-iowa-combined-how-does-this-compare-to-minnesota"><i class="fa fa-check"></i><b>5.3.2</b> Subset LAGOS data to these sites, how many sites are in Illinois and Iowa combined? How does this compare to Minnesota?</a></li>
<li class="chapter" data-level="5.3.3" data-path="working-with-lagos-data---part-1.html"><a href="working-with-lagos-data---part-1.html#what-is-the-distribution-of-lake-size-in-iowa-vs.-minnesota"><i class="fa fa-check"></i><b>5.3.3</b> What is the distribution of lake size in Iowa vs. Minnesota?</a></li>
<li class="chapter" data-level="5.3.4" data-path="working-with-lagos-data---part-1.html"><a href="working-with-lagos-data---part-1.html#make-an-interactive-plot-of-lakes-in-iowa-and-illinois-and-color-them-by-lake-area-in-hectares"><i class="fa fa-check"></i><b>5.3.4</b> Make an interactive plot of lakes in Iowa and Illinois and color them by lake area in hectares</a></li>
<li class="chapter" data-level="5.3.5" data-path="working-with-lagos-data---part-1.html"><a href="working-with-lagos-data---part-1.html#what-other-data-sources-might-we-use-to-understand-how-reservoirs-and-natural-lakes-vary-in-size-in-these-three-states"><i class="fa fa-check"></i><b>5.3.5</b> What other data sources might we use to understand how reservoirs and natural lakes vary in size in these three states?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="working-with-lagos-data---part-2.html"><a href="working-with-lagos-data---part-2.html"><i class="fa fa-check"></i><b>6</b> Working with LAGOS data - Part 2</a>
<ul>
<li class="chapter" data-level="6.1" data-path="working-with-lagos-data---part-2.html"><a href="working-with-lagos-data---part-2.html#overview-4"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="working-with-lagos-data---part-2.html"><a href="working-with-lagos-data---part-2.html#methods-4"><i class="fa fa-check"></i><b>6.2</b> Methods</a></li>
<li class="chapter" data-level="6.3" data-path="working-with-lagos-data---part-2.html"><a href="working-with-lagos-data---part-2.html#analysis-and-discussion-4"><i class="fa fa-check"></i><b>6.3</b> Analysis and Discussion</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="working-with-lagos-data---part-2.html"><a href="working-with-lagos-data---part-2.html#what-is-the-correlation-between-secchi-disk-depth-and-chlorophyll-a-for-sites-with-at-least-200-observations"><i class="fa fa-check"></i><b>6.3.1</b> What is the correlation between Secchi Disk Depth and Chlorophyll a for sites with at least 200 observations?</a></li>
<li class="chapter" data-level="6.3.2" data-path="working-with-lagos-data---part-2.html"><a href="working-with-lagos-data---part-2.html#what-states-have-the-most-data"><i class="fa fa-check"></i><b>6.3.2</b> What states have the most data?</a></li>
<li class="chapter" data-level="6.3.3" data-path="working-with-lagos-data---part-2.html"><a href="working-with-lagos-data---part-2.html#is-there-a-spatial-pattern-in-secchi-disk-depth-for-lakes-with-at-least-200-observations"><i class="fa fa-check"></i><b>6.3.3</b> Is there a spatial pattern in Secchi disk depth for lakes with at least 200 observations?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="working-with-weather-and-yield-data.html"><a href="working-with-weather-and-yield-data.html"><i class="fa fa-check"></i><b>7</b> Working with weather and yield data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="working-with-weather-and-yield-data.html"><a href="working-with-weather-and-yield-data.html#overview-5"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="working-with-weather-and-yield-data.html"><a href="working-with-weather-and-yield-data.html#methods-5"><i class="fa fa-check"></i><b>7.2</b> Methods</a></li>
<li class="chapter" data-level="7.3" data-path="working-with-weather-and-yield-data.html"><a href="working-with-weather-and-yield-data.html#analysis-and-discussion-5"><i class="fa fa-check"></i><b>7.3</b> Analysis and Discussion</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="working-with-weather-and-yield-data.html"><a href="working-with-weather-and-yield-data.html#extract-winneshiek-county-corn-yields-fit-a-linear-time-trend-make-a-plot.-is-there-a-significant-time-trend"><i class="fa fa-check"></i><b>7.3.1</b> Extract Winneshiek County corn yields, fit a linear time trend, make a plot. Is there a significant time trend?</a></li>
<li class="chapter" data-level="7.3.2" data-path="working-with-weather-and-yield-data.html"><a href="working-with-weather-and-yield-data.html#fit-a-quadratic-time-trend-i.e.-year-year2-and-make-a-plot.-is-there-evidence-for-slowing-yield-growth"><i class="fa fa-check"></i><b>7.3.2</b> Fit a quadratic time trend (i.e., year + year^2) and make a plot. Is there evidence for slowing yield growth?</a></li>
<li class="chapter" data-level="7.3.3" data-path="working-with-weather-and-yield-data.html"><a href="working-with-weather-and-yield-data.html#time-series-lets-analyze-the-relationship-between-temperature-and-yields-for-the-winneshiek-county-time-series.-use-data-on-yield-and-summer-avg-tmax.-is-adding-year-or-tmax2-to-your-model-helpful-make-a-plot-and-interpret-the-results."><i class="fa fa-check"></i><b>7.3.3</b> Time Series: Let’s analyze the relationship between temperature and yields for the Winneshiek County time series. Use data on yield and summer avg Tmax. Is adding year or Tmax^2 to your model helpful? Make a plot and interpret the results.</a></li>
<li class="chapter" data-level="7.3.4" data-path="working-with-weather-and-yield-data.html"><a href="working-with-weather-and-yield-data.html#cross-section-analyze-the-relationship-between-temperature-and-yield-across-all-counties-in-2018.-is-there-a-relationship-interpret-the-results."><i class="fa fa-check"></i><b>7.3.4</b> Cross-Section: Analyze the relationship between temperature and yield across all counties in 2018. Is there a relationship? Interpret the results.</a></li>
<li class="chapter" data-level="7.3.5" data-path="working-with-weather-and-yield-data.html"><a href="working-with-weather-and-yield-data.html#panel-one-way-to-leverage-multiple-time-series-is-to-group-all-data-into-what-is-called-a-panel-regression.-convert-the-county-id-code-countyfp-or-county_ansi-into-factor-using-as.factor-then-include-this-variable-in-a-regression-using-all-counties-yield-and-summer-temperature-data.-how-does-the-significance-of-your-temperature-coefficients-tmax-tmax2-change-make-a-plot-comparing-actual-and-fitted-yields-and-interpret-the-results-of-your-model."><i class="fa fa-check"></i><b>7.3.5</b> Panel: One way to leverage multiple time series is to group all data into what is called a “panel” regression. Convert the county ID code (“countyfp” or “county_ansi”) into factor using as.factor, then include this variable in a regression using all counties’ yield and summer temperature data. How does the significance of your temperature coefficients (Tmax, Tmax^2) change? Make a plot comparing actual and fitted yields and interpret the results of your model.</a></li>
<li class="chapter" data-level="7.3.6" data-path="working-with-weather-and-yield-data.html"><a href="working-with-weather-and-yield-data.html#soybeans-download-nass-data-on-soybean-yields-and-explore-either-a-time-series-relationship-for-a-given-county-the-cross-sectional-relationship-for-a-given-year-or-a-panel-across-all-counties-and-years."><i class="fa fa-check"></i><b>7.3.6</b> Soybeans: Download NASS data on soybean yields and explore either a time series relationship for a given county, the cross-sectional relationship for a given year, or a panel across all counties and years.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Environmental Data Science Methods &amp; Analyses Compilation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-snow-data" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Working with snow data</h1>
<div id="overview-2" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Overview</h2>
<p>Understanding the seasonal delivery and distribution of mountain snow cover, snowpack, and seasonal trends is important to the American West and to snowmelt-watered regions everywhere.The Center for Snow and Avalanche Studies established and operates the Senator Beck Basin Study Area as a purpose-built mountain system observatory in an alpine headwater catchment of the Uncompahgre River at Red Mountain Pass, in the western San Juan Mountains of southwest Colorado. Senator Beck Basin is located in a critically wet and cold portion of the Colorado River Basin.</p>
<p>Here is a map from the Center for Snow and Avalanche Studies indicating sample site locations in Colorado, USA (<a href="http://snowstudies.org/sbbsa1.html" class="uri">http://snowstudies.org/sbbsa1.html</a>). The Senator Beck Study Plot (SBSP), Swamp Angel Study Plot (SASP), and associated Senator Beck Stream Gauge (SBSG) and Putney Study Plot (PTSP) are indicated by yellow triangles within the Senator Beck Basin (SBB).</p>
<p><img src="https://snowstudies.org/Area_AirPhoto_wLocation_650w.png" />
In the assignment below, I’ll work through manipulating some of the precipitation and temperature data collected as part of the long term Mountain System Monitoring.</p>
</div>
<div id="methods-2" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Methods</h2>
<p>This analysis uses the <code>SASP forcing</code> and <code>SBSP_forcing</code> meteorological data sets to understand how temperature and precipitation patterns change with time at the two sites.</p>
</div>
<div id="analysis-and-discussion-2" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Analysis and Discussion</h2>
<div id="extract-the-meteorological-data-urls.-here-we-want-you-to-use-the-rvest-package-to-get-the-urls-for-the-sasp-forcing-and-sbsp_forcing-meteorological-datasets." class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Extract the meteorological data URLs. Here we want you to use the <code>rvest</code> package to get the URLs for the <code>SASP forcing</code> and <code>SBSP_forcing</code> meteorological datasets.</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="working-with-snow-data.html#cb1-1" aria-hidden="true" tabindex="-1"></a>site_url <span class="ot">&lt;-</span> <span class="st">&#39;https://snowstudies.org/archived-data/&#39;</span></span>
<span id="cb1-2"><a href="working-with-snow-data.html#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="working-with-snow-data.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Read the web url</span></span>
<span id="cb1-4"><a href="working-with-snow-data.html#cb1-4" aria-hidden="true" tabindex="-1"></a>webpage <span class="ot">&lt;-</span> <span class="fu">read_html</span>(site_url)</span>
<span id="cb1-5"><a href="working-with-snow-data.html#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="working-with-snow-data.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Extract only weblinks and then the URLs!</span></span>
<span id="cb1-7"><a href="working-with-snow-data.html#cb1-7" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> webpage <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="working-with-snow-data.html#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&#39;a&#39;</span>) <span class="sc">%&gt;%</span> <span class="co">#a indicates a link to something </span></span>
<span id="cb1-9"><a href="working-with-snow-data.html#cb1-9" aria-hidden="true" tabindex="-1"></a>  .[<span class="fu">grepl</span>(<span class="st">&#39;forcing&#39;</span>,.)] <span class="sc">%&gt;%</span></span>
<span id="cb1-10"><a href="working-with-snow-data.html#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&#39;href&#39;</span>)</span>
<span id="cb1-11"><a href="working-with-snow-data.html#cb1-11" aria-hidden="true" tabindex="-1"></a>links</span></code></pre></div>
<pre><code>## [1] &quot;https://snowstudies.org/wp-content/uploads/2022/02/SBB_SASP_Forcing_Data.txt&quot;
## [2] &quot;https://snowstudies.org/wp-content/uploads/2022/02/SBB_SBSP_Forcing_Data.txt&quot;</code></pre>
</div>
<div id="download-the-meteorological-data.-use-the-download_file-and-str_split_fixed-commands-to-download-the-data-and-save-it-in-your-data-folder." class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Download the meteorological data. Use the <code>download_file</code> and <code>str_split_fixed</code> commands to download the data and save it in your data folder.</h3>
<pre><code>##      [,1]     [,2] [,3]              [,4]         [,5]      [,6]   [,7]
## [1,] &quot;https:&quot; &quot;&quot;   &quot;snowstudies.org&quot; &quot;wp-content&quot; &quot;uploads&quot; &quot;2022&quot; &quot;02&quot;
## [2,] &quot;https:&quot; &quot;&quot;   &quot;snowstudies.org&quot; &quot;wp-content&quot; &quot;uploads&quot; &quot;2022&quot; &quot;02&quot;
##      [,8]                       
## [1,] &quot;SBB_SASP_Forcing_Data.txt&quot;
## [2,] &quot;SBB_SBSP_Forcing_Data.txt&quot;</code></pre>
<pre><code>## [1] &quot;data already downloaded&quot;</code></pre>
</div>
<div id="writing-a-custom-function-to-read-in-the-data-and-append-a-site-column-to-the-data." class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Writing a custom function to read in the data and append a site column to the data.</h3>
<p>Below is code for creating a for loop to read in the data. Note the function is included in Q4 where I use map to read in the data and append a site column.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="working-with-snow-data.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Pattern matching to only keep certain files</span></span>
<span id="cb5-2"><a href="working-with-snow-data.html#cb5-2" aria-hidden="true" tabindex="-1"></a>weather_files <span class="ot">&lt;-</span> file_names <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="working-with-snow-data.html#cb5-3" aria-hidden="true" tabindex="-1"></a>  .[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&#39;24hr&#39;</span>,.)] </span>
<span id="cb5-4"><a href="working-with-snow-data.html#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="working-with-snow-data.html#cb5-5" aria-hidden="true" tabindex="-1"></a>empty_data <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb5-6"><a href="working-with-snow-data.html#cb5-6" aria-hidden="true" tabindex="-1"></a>weather_data <span class="ot">&lt;-</span> <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(weather_files)){</span>
<span id="cb5-7"><a href="working-with-snow-data.html#cb5-7" aria-hidden="true" tabindex="-1"></a>  empty_data[[i]] <span class="ot">&lt;-</span> <span class="fu">read_table</span>(file_names[i],<span class="at">col_names=</span>headers)</span>
<span id="cb5-8"><a href="working-with-snow-data.html#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_table</span>(weather_files[i])</span>
<span id="cb5-9"><a href="working-with-snow-data.html#cb5-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-10"><a href="working-with-snow-data.html#cb5-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-11"><a href="working-with-snow-data.html#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(empty_data)</span>
<span id="cb5-12"><a href="working-with-snow-data.html#cb5-12" aria-hidden="true" tabindex="-1"></a>   <span class="co"># select(Year,DOY,Sno_Height_M)</span></span>
<span id="cb5-13"><a href="working-with-snow-data.html#cb5-13" aria-hidden="true" tabindex="-1"></a>weather_data_full <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">&#39;rbind&#39;</span>,empty_data) <span class="sc">%&gt;%</span></span>
<span id="cb5-14"><a href="working-with-snow-data.html#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(year,month,day,<span class="st">&quot;precip [kg m-2 s-1]&quot;</span>,<span class="st">&quot;air temp [K]&quot;</span>) </span>
<span id="cb5-15"><a href="working-with-snow-data.html#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">#mutate(site = name)</span></span>
<span id="cb5-16"><a href="working-with-snow-data.html#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#summary(weather_data_full)</span></span></code></pre></div>
</div>
<div id="as-a-map-function-with-tibble-displayed" class="section level3" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> As a map function with tibble displayed</h3>
<pre><code>##       year          month             day        precip [kg m-2 s-1]
##  Min.   :2003   Min.   : 1.000   Min.   : 1.00   Min.   :0.000e+00  
##  1st Qu.:2005   1st Qu.: 3.000   1st Qu.: 8.00   1st Qu.:0.000e+00  
##  Median :2007   Median : 6.000   Median :16.00   Median :0.000e+00  
##  Mean   :2007   Mean   : 6.472   Mean   :15.76   Mean   :3.838e-05  
##  3rd Qu.:2009   3rd Qu.: 9.000   3rd Qu.:23.00   3rd Qu.:0.000e+00  
##  Max.   :2011   Max.   :12.000   Max.   :31.00   Max.   :6.111e-03  
##   air temp [K]       site          
##  Min.   :242.1   Length:138336     
##  1st Qu.:265.8   Class :character  
##  Median :272.6   Mode  :character  
##  Mean   :272.6                     
##  3rd Qu.:279.7                     
##  Max.   :295.8</code></pre>
</div>
<div id="make-a-line-plot-of-mean-temp-by-year-by-site" class="section level3" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Make a line plot of mean temp by year by site</h3>
<p>In the plot of mean temp by year by site, we see a sharp decline in mean temperature in 2003. A difference of nearly 10 K in 2003 compared to the other years does not make sense. I expect that there was instrument error or calibration error in the data during the first year of collection, which is causing this outlier in mean annual temperatures.</p>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="write-a-function-that-makes-line-plots-of-monthly-average-temperature-at-each-site-for-a-given-year.-use-a-for-loop-to-make-these-plots-for-2005-to-2010." class="section level3" number="4.3.6">
<h3><span class="header-section-number">4.3.6</span> Write a function that makes line plots of monthly average temperature at each site for a given year. Use a for loop to make these plots for 2005 to 2010.</h3>
<p>Monthly average temperatures are always warmer at the Swamp Angel study plot compared to the Senator Beck study plot.This makes sense given that SASP is located in a sheltered location below treeline.SBSP is located above treeline in the alpine tundra.</p>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-7-1.png" width="672" /><img src="bookdown-demo_files/figure-html/unnamed-chunk-7-2.png" width="672" /><img src="bookdown-demo_files/figure-html/unnamed-chunk-7-3.png" width="672" /><img src="bookdown-demo_files/figure-html/unnamed-chunk-7-4.png" width="672" /><img src="bookdown-demo_files/figure-html/unnamed-chunk-7-5.png" width="672" /><img src="bookdown-demo_files/figure-html/unnamed-chunk-7-6.png" width="672" /></p>
</div>
<div id="plot-of-average-daily-precipitation-by-day-of-year-averaged-across-all-available-years." class="section level3" number="4.3.7">
<h3><span class="header-section-number">4.3.7</span> Plot of average daily precipitation by day of year (averaged across all available years).</h3>
<p>Precipitation data here was converted from kg m-2 s-1 to mm/day. However, the precipitation values are not realistic and suggest the conversion was inaccurate. Nonetheless, the general pattern can still be gleaned from these plots.
<img src="bookdown-demo_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="use-a-function-and-for-loop-to-create-yearly-plots-of-precipitation-by-day-of-year." class="section level3" number="4.3.8">
<h3><span class="header-section-number">4.3.8</span> Use a function and for loop to create yearly plots of precipitation by day of year.</h3>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-9-1.png" width="672" /><img src="bookdown-demo_files/figure-html/unnamed-chunk-9-2.png" width="672" /><img src="bookdown-demo_files/figure-html/unnamed-chunk-9-3.png" width="672" /><img src="bookdown-demo_files/figure-html/unnamed-chunk-9-4.png" width="672" /><img src="bookdown-demo_files/figure-html/unnamed-chunk-9-5.png" width="672" /><img src="bookdown-demo_files/figure-html/unnamed-chunk-9-6.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-fire-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="working-with-lagos-data---part-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-snow.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
